# Тест-кейсы для API микросервиса объявлений

## Общая информация

**Base URL:** `https://qa-internship.avito.com`

**Описание сервиса:** Микросервис для работы с объявлениями. Позволяет создавать, получать и удалять объявления, а также получать статистику по объявлениям.

## Тест-кейсы

### 1. DELETE /api/2/item/:id - Удаление объявления по идентификатору

#### TC-001: Успешное удаление объявления
- **Предусловия:** Создано объявление с валидными данными
- **Шаги:**
  1. Создать объявление через POST /api/1/item
  2. Получить ID созданного объявления
  3. Выполнить DELETE запрос на /api/2/item/:id с полученным ID
- **Ожидаемый результат:** 
  - Статус код: 200
  - Объявление успешно удалено

#### TC-002: Удаление с невалидным ID
- **Предусловия:** Нет
- **Шаги:**
  1. Выполнить DELETE запрос на /api/2/item/:id с невалидным форматом ID (например, "invalid-id-format")
- **Ожидаемый результат:**
  - Статус код: 400
  - Тело ответа содержит поля `status` и `result` с описанием ошибки

#### TC-003: Удаление несуществующего объявления
- **Предусловия:** Нет
- **Шаги:**
  1. Выполнить DELETE запрос на /api/2/item/:id с несуществующим ID
- **Ожидаемый результат:**
  - Статус код: 400 или 404
  - Тело ответа содержит поля `status` и `result` с описанием ошибки

#### TC-004: Обработка серверной ошибки при удалении
- **Предусловия:** Нет
- **Шаги:**
  1. Выполнить DELETE запрос на /api/2/item/ с пустым ID
- **Ожидаемый результат:**
  - Статус код: 400, 404 или 500
  - При статусе 500 тело ответа содержит поля `status` и `result`

---

### 2. GET /api/2/statistic/:id - Получение статистики по объявлению (версия 2)

#### TC-005: Успешное получение статистики
- **Предусловия:** Создано объявление с валидными данными
- **Шаги:**
  1. Создать объявление через POST /api/1/item
  2. Получить ID созданного объявления
  3. Выполнить GET запрос на /api/2/statistic/:id
- **Ожидаемый результат:**
  - Статус код: 200
  - Тело ответа - массив объектов статистики
  - Каждый объект содержит поля: `likes`, `viewCount`, `contacts` (все типа integer)
  - Массив не пустой

---

### 3. GET /api/1/item/:id - Получение объявления по идентификатору

#### TC-006: Успешное получение объявления
- **Предусловия:** Создано объявление с валидными данными
- **Шаги:**
  1. Создать объявление через POST /api/1/item
  2. Получить ID созданного объявления
  3. Выполнить GET запрос на /api/1/item/:id
- **Ожидаемый результат:**
  - Статус код: 200
  - Тело ответа - массив объектов объявлений
  - Каждый объект содержит поля:
    - `id` (string)
    - `sellerId` (integer)
    - `name` (string)
    - `price` (integer)
    - `statistics` (object с полями: likes, viewCount, contacts)
    - `createdAt` (string)
  - Массив не пустой

---

### 4. POST /api/1/item - Создание объявления

#### TC-007: Успешное создание объявления
- **Предусловия:** Нет
- **Шаги:**
  1. Подготовить валидные данные запроса:
     - `sellerID` (integer, уникальный в диапазоне 111111-999999)
     - `name` (string)
     - `price` (integer)
     - `statistics` (object с полями: likes, viewCount, contacts)
  2. Выполнить POST запрос на /api/1/item с телом запроса
- **Ожидаемый результат:**
  - Статус код: 200
  - Тело ответа содержит поле `status` с сообщением и ID объявления
  - ID можно извлечь из поля `status` (формат: "Сообщение - UUID")

#### TC-008: Создание объявления с невалидными данными
- **Предусловия:** Нет
- **Шаги:**
  1. Подготовить запрос с пустыми или невалидными данными (отсутствуют обязательные поля)
  2. Выполнить POST запрос на /api/1/item
- **Ожидаемый результат:**
  - Статус код: 400
  - Тело ответа содержит поля `status` и `result` с описанием ошибки валидации

---

### 5. GET /api/1/statistic/:id - Получение статистики по объявлению (версия 1)

#### TC-009: Успешное получение статистики
- **Предусловия:** Создано объявление с валидными данными
- **Шаги:**
  1. Создать объявление через POST /api/1/item
  2. Получить ID созданного объявления
  3. Выполнить GET запрос на /api/1/statistic/:id
- **Ожидаемый результат:**
  - Статус код: 200
  - Тело ответа - массив объектов статистики
  - Каждый объект содержит поля: `likes`, `viewCount`, `contacts` (все типа integer)
  - Массив не пустой

---

### 6. GET /api/1/:sellerID/item - Получение всех объявлений продавца

#### TC-010: Успешное получение объявлений продавца
- **Предусловия:** Нет
- **Шаги:**
  1. Создать несколько объявлений для одного продавца (с одинаковым sellerID)
  2. Выполнить GET запрос на /api/1/:sellerID/item с ID продавца
- **Ожидаемый результат:**
  - Статус код: 200
  - Тело ответа - массив объектов объявлений
  - Все объявления в массиве имеют одинаковый `sellerId`, равный запрошенному
  - Количество объявлений соответствует количеству созданных
  - Каждое объявление содержит все обязательные поля

---